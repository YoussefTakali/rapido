<div class="n-container">
  <div class="n-row" style="display: flex; justify-content: space-between; align-items: center; padding: 0 1rem;">
    
    <!-- Left side: Hamburger + Title -->
    <div style="display: flex; align-items: center; gap: 1rem;">
      <label class="hamburger d-lg-block d-none" (click)="onHamburgerClick($event)"> 
        <input type="checkbox" [checked]="isSidebarVisible" />
        <svg viewBox="0 0 32 32">
          <path
            class="line line-top-bottom"
            d="M27 10 13 10C10.8 10 9 8.2 9 6 9 3.5 10.8 2 13 2 15.2 2 17 3.8 17 6L17 26C17 28.2 18.8 30 21 30 23.2 30 25 28.2 25 26 25 23.8 23.2 22 21 22L7 22"
          ></path>
          <path class="line" d="M7 16 27 16"></path>
        </svg>
      </label>
      <img src="assets/devis.jpeg" alt="Logo" class="n-logo" />
    </div>

    <!-- Right side: Notifications + Profile -->
    <div class="n-functionalities" style="display: flex; align-items: center; gap: 1.5rem; position: relative;">
      
      <!-- Notification Bell -->
      <div class="n-notif" style="position: relative; cursor: pointer;" (click)="toggleNotificationsDropdown()">
        <i class="n-notification-icon fas fa-bell"></i>
        <div 
          class="n-active" 
          [ngClass]="{ 'red': hasNewNotification, 'green': !hasNewNotification }"
        ></div>
      </div>

      <!-- Notification dropdown -->
<div *ngIf="isNotificationsDropdownVisible" class="notification-dropdown" style="position: absolute; top: 40px; right: 0; width: 300px; background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-radius: 6px; z-index: 1000; max-height: 400px; overflow-y: auto; padding: 0.5rem;">
  <div *ngIf="notifications.length === 0" class="empty-message" style="padding: 1rem; text-align: center; color: #999;">
    No notifications
  </div>
  <ul style="list-style: none; margin: 0; padding: 0;">
    <li *ngFor="let notif of notifications" style="padding: 0.5rem; border-bottom: 1px solid #eee;">
      <strong>{{ notif.message }}</strong><br />
      <small class="timestamp" style="color: #666;">{{ timeAgo(notif.createdAt) }}</small>
    </li>
  </ul>
</div>


      <!-- Profile image + dropdown -->
    <div class="n-infos-wrapper" style="position: relative;">
      <div class="n-infos" style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;" (click)="toggleProfileDropdown()">
        <img class="n-profilepic" [src]="imageUrl" alt="profile" />
      </div>
<div *ngIf="isProfileDropdownVisible" class="n-dropdown-menu" style="position: absolute; right: 0; top: 40px; background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-radius: 6px;">        <div class="n-dropdown-menu-item">
          <a class="n-link" [routerLink]="'/myprofile'">
            <i class="fas fa-user"></i> Profile
          </a>
        </div>
        <div class="n-dropdown-menu-item">
            <a class="n-link" (click)="editProfile()">
              <i class="fas fa-cog"></i> Settings
            </a>
          </div>
          <div class="n-dropdown-menu-item">
            <a class="n-link" (click)="logout()">
              <i class="fas fa-sign-out-alt"></i> Logout
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
